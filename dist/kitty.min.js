(function(){window.Kitty={};var Model=function(a,b){var c=this;this.modelName=a;var d=function(){return Math.round(1e8*Math.random())},e=Kitty.Model[a]=function(a){a=a||{},e.prototype.modelProtoReference=c,this.objid=d(),e.prototype.init=function(){for(var b in e.defaults)this[b]=a.hasOwnProperty(b)?a[b]:e.defaults[b];e.views[this.objid]=[],e.collection.push(this)},e.prototype.set=function(a){for(var b in a)a.hasOwnProperty(b)&&(this[b]=a[b]);this.notify()},e.prototype.get=function(a){return this[a]},e.prototype.remove=function(){var a=e.views[this.objid];for(var b in a)a.hasOwnProperty(b)&&a[b].remove();delete e.views[this.objid];for(var c=0;c<e.collection.length;c++)if(e.collection[c].objid===this.objid){e.collection.splice(c,1);break}},e.prototype.notify=function(){for(var a in e.views[this.objid])e.views[this.objid][a]._render()},this.init()};return e.collection=[],e.views={},e.defaults=b,e};Kitty.Model=Model;var View=function(a,b){return Kitty.View[a]=function(a){var c=this;this.model=a,this.init=function(){for(var a in b)b.hasOwnProperty(a)&&(this[a]=b[a]);var c=this.model.modelProtoReference;return Kitty.Model[c.modelName].views[this.model.objid].push(this),this.el=document.createElement(b.tag),this.container.appendChild(this.el),this},this._render=function(){return this.el.innerHTML=this.template.render(this.model),b.hasOwnProperty("events")&&b.events.call(c),b.hasOwnProperty("render")&&b.render.call(c),this},this.remove=function(){this.el.parentNode.removeChild(this.el)},this.init()._render()},Kitty.View[a]};Kitty.View=View;})();